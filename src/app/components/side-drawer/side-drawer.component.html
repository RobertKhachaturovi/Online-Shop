<div class="sidenav-container">
    <div class="sidenav" [class.open]="isDrawerOpen">
        <div class="drawer-header" *ngIf="isDrawerOpen">
            <button mat-icon-button (click)="closeDrawer()"><mat-icon>close</mat-icon></button>
        </div>
        <div style="text-align:center; margin-top:16px;">
            <button mat-stroked-button color="warn" (click)="resetFilters()">
                <mat-icon>restart_alt</mat-icon> {{ 'RESET_ALL_FILTERS' | translate }}
            </button>
        </div>

        <ng-container *ngIf="!isMobile">
            <div class="nav-items-container expanded">
                <mat-nav-list>
                    <a mat-list-item [routerLink]="languageRouter.createLink(['home'])"><mat-icon>home</mat-icon> {{
                        'HOME' | translate }}</a>
                    <a mat-list-item (click)="openAuthModal()" style="cursor:pointer;">
                        <mat-icon>person_add</mat-icon> {{ 'REGISTRATION' | translate }}
                    </a>
                    <a mat-list-item [routerLink]="languageRouter.createLink(['profile'])"><mat-icon>person</mat-icon>
                        {{ 'PROFILE' | translate }}</a>
                    <a mat-list-item
                        [routerLink]="languageRouter.createLink(['help'])"><mat-icon>help_outline</mat-icon> {{
                        'ASSISTANT' | translate
                        }}</a>
                    <a mat-list-item
                        [routerLink]="languageRouter.createLink(['favorites'])"><mat-icon>favorite</mat-icon> {{
                        'FAVORITES' | translate
                        }}</a>
                    <a mat-list-item
                        [routerLink]="languageRouter.createLink(['surprise-toys'])"><mat-icon>card_giftcard</mat-icon>
                        {{ 'SURPRISE_TOYS' |
                        translate }}</a>

                </mat-nav-list>
            </div>
        </ng-container>

        <ng-container *ngIf="isMobile">
            <button class="filter-toggle-2" (click)="showNavItems = !showNavItems">
                <span>{{ 'NAVIGATION' | translate }}</span>
                <mat-icon>{{ showNavItems ? 'expand_less' : 'expand_more' }}</mat-icon>
            </button>
            <div class="nav-items-container" [class.expanded]="showNavItems">
                <mat-nav-list>
                    <a mat-list-item [routerLink]="languageRouter.createLink(['home'])"><mat-icon>home</mat-icon> {{
                        'HOME' | translate }}</a>
                    <a mat-list-item (click)="openAuthModal()" style="cursor:pointer;">
                        <mat-icon>person_add</mat-icon> {{ 'REGISTRATION' | translate }}
                    </a>
                    <a mat-list-item [routerLink]="languageRouter.createLink(['profile'])"><mat-icon>person</mat-icon>
                        {{ 'PROFILE' | translate }}</a>
                    <a mat-list-item
                        [routerLink]="languageRouter.createLink(['help'])"><mat-icon>help_outline</mat-icon> {{
                        'ASSISTANT' | translate
                        }}</a>
                    <a mat-list-item
                        [routerLink]="languageRouter.createLink(['favorites'])"><mat-icon>favorite</mat-icon> {{
                        'FAVORITES' | translate
                        }}</a>
                </mat-nav-list>
            </div>
        </ng-container>



        <div class="filters-section">

            <button class="filter-toggle" (click)="toggleFilter('categories')">
                <mat-icon>filter_list</mat-icon> {{ 'CATEGORIES' | translate }}
                <mat-icon>{{ showCategories ? 'expand_less' : 'expand_more' }}</mat-icon>
            </button>
            <div class="filter-group" *ngIf="showCategories">
                <button mat-button (click)="onCategorySelect(null)">{{ 'ALL' | translate }}</button>
                <button mat-button (click)="onCategorySelect(1)">{{ 'COMPUTER' | translate }}</button>
                <button mat-button (click)="onCategorySelect(2)">{{ 'PHONES' | translate }}</button>
            </div>


            <button class="filter-toggle" (click)="toggleFilter('brands')">
                <mat-icon>storefront</mat-icon> {{ 'BRANDS' | translate }}
                <mat-icon>{{ showBrands ? 'expand_less' : 'expand_more' }}</mat-icon>
            </button>
            <div class="filter-group" *ngIf="showBrands">
                <ng-container *ngIf="brands.length > 0; else noBrands">
                    <button mat-button [class.selected]="selectedBrand === null" (click)="onBrandSelect(null)">{{ 'ALL'
                        | translate }}</button>
                    <button mat-button *ngFor="let brand of brands" [class.selected]="selectedBrand === brand"
                        (click)="onBrandSelect(brand)">
                        {{ brand | titlecase }}
                    </button>
                </ng-container>
                <ng-template #noBrands>
                    <div class="no-brands-text">{{ 'NOT_FOUND' | translate }}</div>
                </ng-template>
            </div>

            <button class="filter-toggle" (click)="toggleFilter('price')">
                <mat-icon>attach_money</mat-icon> {{ 'PRICE_FILTER' | translate }}
                <mat-icon>{{ togglePriceFilter ? 'expand_less' : 'expand_more' }}</mat-icon>
            </button>
            <div class="filter-group" *ngIf="togglePriceFilter">
                <div class="price-row">
                    <input type="number" [(ngModel)]="minPrice" [placeholder]="'FROM' | translate"
                        class="price-input" />
                    <input type="number" [(ngModel)]="maxPrice" [placeholder]="'TO' | translate" class="price-input" />
                </div>
                <div class="price-buttons">
                    <button mat-stroked-button color="primary" (click)="onPriceFilter()">{{ 'FILTER' | translate
                        }}</button>
                    <button mat-stroked-button (click)="onSort('asc')">{{ 'PRICE_ASCENDING' | translate }}</button>
                    <button mat-stroked-button (click)="onSort('desc')">{{ 'PRICE_DESCENDING' | translate }}</button>
                </div>
            </div>
            <style>
                .price-row {
                    display: flex;
                    gap: 10px;
                    justify-content: center;
                    margin-bottom: 12px;
                }

                .price-input {
                    width: 90px;
                    padding: 6px 10px;
                    border: 2px solid #1976d2;
                    border-radius: 8px;
                    text-align: center;
                    font-weight: 500;
                    color: #1976d2;
                    background-color: #f5f5f5;
                    transition: all 0.2s ease;
                }

                .price-input:focus {
                    outline: none;
                    border-color: #0d47a1;
                    background-color: #e3f2fd;
                    box-shadow: 0 0 6px rgba(25, 118, 210, 0.5);
                }

                .price-buttons {
                    display: flex;
                    gap: 8px;
                    justify-content: center;
                    flex-wrap: wrap;
                }

                .price-buttons button {
                    min-width: 130px;
                    font-weight: 500;
                }
            </style>
            <button class="filter-toggle" (click)="toggleFilter('extraFilters')">
                <mat-icon>tune</mat-icon> {{ 'FILTERS' | translate }}
                <mat-icon>{{ showExtraFilters ? 'expand_less' : 'expand_more' }}</mat-icon>
            </button>
            <div class="filter-group" *ngIf="showExtraFilters">
                <div class="toggle-item">

                    <div class="toggle-border">
                        <input id="discount" type="checkbox" [(ngModel)]="onlyDiscounted"
                            (change)="onDiscountFilter()" />
                        <label for="discount">
                            <div class="handle"></div>
                        </label>
                    </div>
                    <span class="toggle-label">{{ 'ONLY_ON_SALE' | translate }}</span>
                </div>

                <div class="toggle-item">

                    <div class="toggle-border">
                        <input id="stock" type="checkbox" [(ngModel)]="onlyInStock" (change)="onInStockFilter()" />
                        <label for="stock">
                            <div class="handle"></div>
                        </label>
                    </div><span class="toggle-label">{{ 'IN_STOCK_FILTER' | translate }}</span>
                </div>
            </div>

            <button class="filter-toggle" (click)="toggleFilter('rating')">
                <mat-icon>star_rate</mat-icon> {{ 'RATING_FILTER' | translate }}
                <mat-icon>{{ showRatingDropdown ? 'expand_less' : 'expand_more' }}</mat-icon>
            </button>
            <div class="filter-group" *ngIf="showRatingDropdown">
                <button mat-button *ngFor="let option of ratingOptions" [class.selected]="minRating === option.value"
                    (click)="selectRating(option.value)">
                    {{ getRatingLabel(option.value) }}
                </button>
            </div>
        </div>
    </div>
    <div class="sidenav-content">
        <ng-content></ng-content>
    </div>
</div>